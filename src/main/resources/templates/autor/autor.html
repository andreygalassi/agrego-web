<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="pt-br" layout:decorate="~{_config/corpo}">

<th:block layout:fragment="conteudo">
	<v-main>
		<v-form ref="formFiltro" id="formFiltro">
			<v-container fluid>
				<h1 th:text="${titulo}">Titulo</h1>
			</v-container>
			
			<v-container fluid>
				<v-row>
					<v-col cols="2"><v-text-field v-model="consulta.filtro.id" density="compact" label="Id" placeholder="Id" variant="outlined" clearable /></v-col>
					<v-col cols="2"><v-text-field v-model="consulta.filtro.nome" density="compact" label="Nome" placeholder="Nome" variant="outlined" clearable /></v-col>
					<v-col cols="2"><v-text-field v-model="consulta.filtro.email" density="compact" label="E-Mail" placeholder="E-Mail" variant="outlined" clearable /></v-col>
					<v-col cols="2"><v-text-field v-model="consulta.filtro.celular" density="compact" label="Celular" placeholder="Celular" variant="outlined" clearable v-mask="'(##) #####-####'" /></v-col>
				</v-row>
			</v-container>
			<v-container class="ml-1 ">
				<v-btn class="mr-2" color="" 			@click="limpar()">Limpar</v-btn>
				<v-btn class="mr-2" color="secondary" 	@click="pesquisar()">Pesquisar</v-btn>
				<v-btn class="mr-2" color="primary" 	@click="gerar()">Criar</v-btn>
			</v-container>
		</v-form>
		
		<v-container fluid id="tabela">
			<v-data-table-server item-value="id" height="calc(100vh - 400px)" fixed-header fixed-footer hover multi-sort
				v-model:items-per-page="config.table.pagination.size"
				:sort-by="config.table.pagination.sortBy"
				:items-length="config.table.pagination.totalItems"
				:loading="config.table.loading"
				:headers="headers"
				:items="consulta.resultado"
				@update:options="updatePagination"
				rows-per-page-text="Número de Registros por Página: " 
				:items-per-page-options="[5,10,25,50,100]"
			>
				<template v-slot:item.actions="{item}">
					<div class="d-flex ga-2 justify-end">
						<v-icon color="medium-emphasis" icon="mdi-pencil" size="small" @click="editar(item)"></v-icon>
						<v-icon color="medium-emphasis" icon="mdi-delete" size="small" @click="deletar(item)"></v-icon>
					</div>
				</template>
			</v-data-table-server>
		</v-container>
	</v-main>
	<v-form ref="formItem" id="formItem">
		<v-dialog v-model="config.dialogItem.abrir" persistent max-width="800" >
			<v-card :title="`Autor: ${itemSelecionado.id}`"> 
				<v-card-text> 
						<v-row dense>
							<v-col><v-text-field v-model="itemSelecionado.nome" density="compact" label="Nome" placeholder="Nome" variant="outlined" clearable /></v-col>
							<v-col><v-text-field v-model="itemSelecionado.email" density="compact" label="E-Mail" placeholder="E-Mail" variant="outlined" clearable /></v-col>
							<v-col><v-text-field v-model="itemSelecionado.celular" density="compact" label="Celular" placeholder="Celular" variant="outlined" clearable v-mask="'(##) #####-####'" /></v-col>
						</v-row>
				</v-card-text>
				<v-divider></v-divider>
				<v-card-actions>
					<v-btn text="Cacelar" variant="tonal" @click="config.dialogItem.abrir = false" color="red" ></v-btn>
					<v-spacer></v-spacer>
					<v-btn text="Salvar"  variant="tonal" @click="salvar()" color="primary" ></v-btn>
				</v-card-actions>
			</v-card>
		</v-dialog>
	</v-form> 
</th:block>

<th:block layout:fragment="scripts">
	<script type="text/javascript" th:src="@{/static/js/autor.js}"></script>
</th:block>

</html>